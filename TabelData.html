<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <title>Tabel Data Siswa</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@200;300;400;500;600;700&display=swap">
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Open+Sans:wght@200;300;400;500;600;700&display=swap");
    
    body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
    .w3-bar,h1,button {font-family: "Montserrat", sans-serif}
    
     *{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Open Sans", sans-serif;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      width: 100%;
      padding: 0 10px;
      background-color: #f4f4f4;
      position: fixed;
    }

    body::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: url('12a.jpg');
      background-position: center;
      background-size: cover;
      z-index: -1;
    }

    .wrapper {
      width: 100%;
      max-width: 1100px; /* Lebar maksimum diperbesar untuk menampung tabel */
      border-radius: 8px;
      padding: 30px;
      text-align: center;
      border: 1px solid rgb(0, 0, 0);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      background: rgba(0, 0, 0, 0.350);
      position:fixed;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #fff;
    }

    p {
      font-size: 1rem;
      margin-bottom: 10px;
      color: #fff;
    }

    button {
      background: #fff;
      color: #000;
      font-weight: 600;
      border: none;
      padding: 12px 20px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 16px;
      border: 2px solid transparent;
      transition: 0.3s ease;
      margin-top: 20px;
    }

    button:hover {
      color: #fff;
      border-color: #fff;
      background: rgba(255, 255, 255, 0.15);
    }

    .logout-button {
      position: absolute;
      top: 3px;
      right: 0px;
      background: #ff4d4d;
      color: #fff;
      font-weight: 600;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 14px;
      border: 2px solid transparent;
      transition: 0.3s ease;
    }

    .logout-button:hover {
      color: #ff4d4d;
      border-color: #ff4d4d;
      background: rgba(255, 77, 77, 0.15);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    table th, table td {
      padding: 10px;
      border: 1px solid #ddd;
      color: #fff;
    }

    table th {
      background-color: #555;
    }

    table tbody tr:nth-child(odd) {
      background-color: rgba(255, 255, 255, 0.1);
    }

    table button {
      background: #ff4d4d;
      color: #fff;
      font-weight: 600;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 14px;
      transition: 0.3s ease;
    }

    table button:hover {
      background: rgba(255, 77, 77, 0.75);
    }

    .decision-result {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 5px;
      margin-bottom: 20px;
      color: #fff;
    }

    .decision-result h2 {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    .decision-result p {
      font-size: 1rem;
      margin-bottom: 5px;
    }

    .decision-result strong {
      color: #ffd700;
    }


    /* Modal */
.edit-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 8px;
  padding: 20px 30px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  max-width: 600px;
  width: 90%;
  color: #fff;
}

.modal-backdrop {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 20px;
}

.modal-buttons .btn-save {
  background: #4caf50;
  color: #fff;
  border: none;
  padding: 10px 15px;
  border-radius: 5px;
  cursor: pointer;
}

.modal-buttons .btn-cancel {
  background: #f44336;
  color: #fff;
  border: none;
  padding: 10px 15px;
  border-radius: 5px;
  cursor: pointer;
}

.modal-buttons button:hover {
  opacity: 0.9;
}

/* Input Styles */
.input-field {
  position: relative;
  margin-bottom: 20px;
}

.input-field input,
.input-field select,
.input-field textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  font-size: 16px;
}

.input-field label {
  position: absolute;
  top: -20px;
  left: 10px;
  color: #aaa;
  font-size: 14px;
}

.input-field input:focus {
  color: #ffffff; /* Mengubah teks pilihan menjadi hitam saat fokus */
}

.input-field select:focus {
  color: #ffffff; /* Mengubah teks pilihan menjadi hitam saat fokus */
}

/* Mengubah warna font pilihan dalam dropdown */
.input-field select option {
  color: #000000; /* Mengatur warna teks pilihan menjadi hitam */
}

.input-field textarea:focus {
  outline: none;
  border-color: #4caf50;
}


  </style>
</head>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-card w3-left-align w3-large" style="color: white; background-color: rgba(0, 0, 0, 0.7);">
    <a href="Halaman_Utama3.html" class="w3-bar-item w3-button w3-padding-large w3-hover-white">Home</a>
    <a href="TabelData.html" class="w3-bar-item w3-button w3-padding-large w3-white">Tabel Data</a>
    <a href="Spk3.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Analisis Keputusan</a>
    <a href="javascript:void(0);" 
       class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white w3-right logout-button" 
       style="color: white; background-color: rgb(255, 0, 0);" onclick="logout()">Logout</a>
  </div>
</div>



<!-- Content -->
<div class="wrapper" style="margin: 32px;">
  <h1>Tabel Data Siswa</h1>
  <div id="registrationStatus" style="margin-bottom: 16px; color: red; font-weight: bold;"></div>

  <!-- Data Table -->
  <table borderr="1" id="dataTable" style="width: 100%; border-collapse: collapse; text-align: left;">
    <thead>
      <tr>
        <th>Nama</th>
        <th>Jenis Kelamin</th>
        <th>NISN</th>
        <th>Alamat</th>
        <th>Nilai Rapor</th>
        <th>Prestasi Akademik</th>
        <th>Pendapatan Orang Tua</th>
        <th>Biaya Hidup</th>
        <th>Prestasi Non-Akademik</th>
        <th>Aksi</th> <!-- Kolom untuk tombol aksi -->
      </tr>
    </thead>
    <tbody>
      <!-- Data akan dimasukkan di sini -->
    </tbody>
  </table>
  <p id="noDataText">Belum Ada data terinput</p>
  <button onclick="window.location.href='KIP3.html'">Tambah Data</button>
</div>


<!-- Modal untuk Edit Data -->
<div id="editModal" class="edit-modal">
  <h2>Edit Data Siswa</h2>
  <form id="editForm" class="form-content">
    <!-- Demografis -->
    <div class="input-field">
      <input type="text" id="editNama" name="editNama" required>
      <label for="editNama">Nama Siswa</label>
    </div>
    <div class="input-field">
      <select id="editJenisKelamin" name="editJenisKelamin" required>
        <option value="" disabled selected hidden></option>
        <option value="Laki-laki">Laki-laki</option>
        <option value="Perempuan">Perempuan</option>
      </select>
      <label for="editJenisKelamin">Jenis Kelamin</label>
    </div>
    <div class="input-field">
      <input type="text" id="editNISN" name="editNISN" required>
      <label for="editNISN">NISN</label>
    </div>
    <div class="input-field">
      <textarea id="editAlamat" name="editAlamat" required></textarea>
      <label for="editAlamat">Alamat Rumah</label>
    </div>

    <!-- Akademik -->
    <div class="input-field">
      <input type="number" step="0.01" id="editNilaiRapor" name="editNilaiRapor" required>
      <label for="editNilaiRapor">Nilai Rata-rata Rapor</label>
    </div>
    <div class="input-field">
      <select id="editPrestasiAkademik" name="editPrestasiAkademik" required>
        <option value="" disabled selected hidden></option>
        <option value="Nasional">Nasional</option>
        <option value="Provinsi">Provinsi</option>
        <option value="Kabupaten">Kabupaten</option>
        <option value="Tidak Ada">Tidak Ada</option>
      </select>
      <label for="editPrestasiAkademik">Prestasi Akademik</label>
    </div>

    <!-- Ekonomi -->
    <div class="input-field">
      <input type="number" id="editPendapatanOrtu" name="editPendapatanOrtu" required>
      <label for="editPendapatanOrtu">Pendapatan Orang Tua (Rp)</label>
    </div>
    <div class="input-field">
      <input type="number" id="editBiayaHidup" name="editBiayaHidup" required>
      <label for="editBiayaHidup">Biaya Hidup (Rp)</label>
    </div>

    <!-- Lainnya -->
    <div class="input-field">
      <select id="editPrestasiNonAkademik" name="editPrestasiNonAkademik" required>
        <option value="" disabled selected hidden></option>
        <option value="Nasional">Nasional</option>
        <option value="Provinsi">Provinsi</option>
        <option value="Kabupaten">Kabupaten</option>
        <option value="Tidak Ada">Tidak Ada</option>
      </select>
      <label for="editPrestasiNonAkademik">Prestasi Non-Akademik</label>
    </div>

    <!-- Tombol -->
    <div class="modal-buttons">
      <button type="button" onclick="simpanEdit()" class="btn-save">Simpan</button>
      <button type="button" onclick="tutupModal()" class="btn-cancel">Batal</button>
    </div>
  </form>
</div>
<div id="modalBackdrop" class="modal-backdrop" onclick="tutupModal()"></div>



<script>
  // Fungsi untuk logout
  function logout() {
    const currentUser = localStorage.getItem('currentUser');
    if (currentUser) {
      alert('User ' + currentUser + ' telah logout.');
      localStorage.removeItem('currentUser');
      window.location.href = 'index.html';
    } else {
      alert('Tidak ada user yang login.');
    }
  }

  // Menampilkan nama akun yang login di tombol logout
  window.onload = function () {
    const currentUser = localStorage.getItem('currentUser');
    const logoutButton = document.querySelector('.logout-button');
    if (currentUser) {
      logoutButton.textContent = 'Logout (' + currentUser + ')';
    } else {
      logoutButton.textContent = 'Logout';
    }
  }

  // Menampilkan data siswa dari localStorage
  const siswaData = JSON.parse(localStorage.getItem('siswaData')) || [];
  const dataTable = document.getElementById('dataTable').getElementsByTagName('tbody')[0];
  const noDataText = document.getElementById('noDataText');

  if (siswaData.length > 0) {
  noDataText.style.display = 'none';
  siswaData.forEach((siswa, index) => {
    let row = dataTable.insertRow();
    row.insertCell(0).innerText = siswa.nama;
    row.insertCell(1).innerText = siswa.jenis_kelamin;
    row.insertCell(2).innerText = siswa.nisn;
    row.insertCell(3).innerText = siswa.alamat;
    row.insertCell(4).innerText = siswa.nilai_rapor;
    row.insertCell(5).innerText = siswa.prestasi_akademik;
    row.insertCell(6).innerText = siswa.pendapatan_ortu;
    row.insertCell(7).innerText = siswa.biaya_hidup;
    row.insertCell(8).innerText = siswa.prestasi_nonakademik;

    // Tambahkan kolom aksi
    let aksiCell = row.insertCell(9);
    aksiCell.innerHTML = `
      <button onclick="editData(${index})">Edit</button>
      <button onclick="hapusData(${index})">Hapus</button>
    `;
  });
} else {
  noDataText.style.display = 'block';
}

// Fungsi untuk mengedit data siswa
function editData(index) {
  editIndex = index;
  const siswa = siswaData[index];

  // Isi data ke form edit
  document.getElementById('editNama').value = siswa.nama;
  document.getElementById('editJenisKelamin').value = siswa.jenis_kelamin;
  document.getElementById('editNISN').value = siswa.nisn;
  document.getElementById('editAlamat').value = siswa.alamat;
  document.getElementById('editNilaiRapor').value = siswa.nilai_rapor;
  document.getElementById('editPrestasiAkademik').value = siswa.prestasi_akademik;
  document.getElementById('editPendapatanOrtu').value = siswa.pendapatan_ortu;
  document.getElementById('editBiayaHidup').value = siswa.biaya_hidup;
  document.getElementById('editPrestasiNonAkademik').value = siswa.prestasi_nonakademik;

  // Tampilkan modal
  document.getElementById('editModal').style.display = 'block';
  document.getElementById('modalBackdrop').style.display = 'block';
}

function simpanEdit() {
  if (editIndex === -1) return;

  // Ambil nilai dari form edit
  siswaData[editIndex] = {
    nama: document.getElementById('editNama').value,
    jenis_kelamin: document.getElementById('editJenisKelamin').value,
    nisn: document.getElementById('editNISN').value,
    alamat: document.getElementById('editAlamat').value,
    nilai_rapor: document.getElementById('editNilaiRapor').value,
    prestasi_akademik: document.getElementById('editPrestasiAkademik').value,
    pendapatan_ortu: document.getElementById('editPendapatanOrtu').value,
    biaya_hidup: document.getElementById('editBiayaHidup').value,
    prestasi_nonakademik: document.getElementById('editPrestasiNonAkademik').value,
  };

  // Simpan ke localStorage dan perbarui tabel
  localStorage.setItem('siswaData', JSON.stringify(siswaData));
  location.reload();
}

function tutupModal() {
  document.getElementById('editModal').style.display = 'none';
  document.getElementById('modalBackdrop').style.display = 'none';
}


// Fungsi untuk menghapus data siswa
function hapusData(index) {
  if (confirm("Apakah Anda yakin ingin menghapus data ini?")) {
    siswaData.splice(index, 1);
    localStorage.setItem('siswaData', JSON.stringify(siswaData));
    location.reload();
  }
}
</script>

</body>
</html>
